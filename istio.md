### istio & envoy 

### Service Mesh 

MSA가 시스템이 커지고 서비스가 많아지고 관리가 어쩌고 저쩌고... 흠 문제가 있군

A -> B -> 외부 API 

- 외부 API 장애 start 
- B: 타임아웃 예정 스레드 증가 
- A: 그에 따른 B에 대한 타임아웃을 기다리는 스레드 증가 

어딘가에서 A를 호출하고 있다면? 쾅~ 장애 전파

이런 문제를 풀기 위한 패턴 - Circuit Breaker 패턴 
- 일정 

서비스 메시의(마이크로 서비스간의 네트워크를 설명하며 이들을 구성하는 어플리케이션과 그들간의 상호 동작을 의미) 크기가 커지고 복잡도가 높아지면 이를 이해하고 관리하는 것은 매우 어렵다
-> 이를 질문으로 표현하면 다음과 같다.

- 어떻게 증가하는 마이크로 서비스를 연결하고, 로드밸런싱을 하며, 라우팅을 할까? 
- 어떻게 외부로 트래픽을 나가게 할까? 

Netflix OSS에는 MSA 관련 이슈들을 해결하기 위한 오픈소스들이 제공 한다.
그 예가 one에서도 사용했던 써킷 브레이커 히스트릭스, 서비스 디스커버리 유레카같은 것들이 있다. 

이는 어플리케이션 레벨에서 컨트롤 하는 것이고, 
이와 비슷한 동작을 하는 Istios는 위와 같은 문제를 인프라 레베에서 컨트롤한다. 

- side-car proxy 방식 (실제 서비스와 proxy(envoy)가 병렬로 공존 하도록 되어 있음) 
   - 서비스가 직접 호출하는 것이 아니라, proxy를 통해서 호출하도록 되어 있음 
- 기본적으로 tls 통신
- 추적, 모니터링, 로깅을 제공 가능 

이를 통해 서비스 메시에 대한 심층적인 정보를 제공 

- 트래픽 관리 기능 제공 (서비스간 호출 및 트래픽 흐름 제어) 
